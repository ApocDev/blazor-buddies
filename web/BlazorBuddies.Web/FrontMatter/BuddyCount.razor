@inject BlazorBuddies.Web.States.ApplicationState applicationState

@buddyCount

@code {
    // This is using a global application state to get / set the values. 
    // It keeps separation of display logic and data retrieval 
    // Another process should call EF / update the ApplicationState

    int buddyCount = 0;
    protected override void OnInitialized()
    {
        buddyCount = applicationState.BuddyCount;
        applicationState.OnBuddyCountChange += () =>
        {
            //region Fun example of blazor server animated counter / Can remove without impact
            var target = applicationState.BuddyCount;

            for (var x=0; x<target;x+=10)
            {
                buddyCount = x;
                System.Threading.Thread.Sleep(20);
                InvokeAsync(StateHasChanged);
            }
            //endregion

            buddyCount = applicationState.BuddyCount;
            InvokeAsync(StateHasChanged);
        };
    }
}
